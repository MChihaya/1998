<!DOCTYPE html>
<html lang="ja" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <title>1998 Practice</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="js/main.js"></script>
</head>
<body>

    <div class="ui-layer">
        <div class="top-bar">
            <span class="app-title">1998 Practice</span>
            <button id="btn-help" class="icon-btn">?</button>
        </div>

        <div class="center-panel">
            <div id="challenge-panel" class="challenge-panel" style="display: none;">
                <span id="challenge-status">挑戦中...</span>
                <button id="btn-giveup">諦める</button>
                <button id="btn-next" style="display:none;">次の問題へ</button>
            </div>
        </div>

        <div class="right-area">
            <div class="target-container">
                <div id="target-window" class="target-window" style="display: none;">
                    <canvas id="targetCanvas" width="240" height="240"></canvas>
                </div>
                <div id="target-caption" class="target-caption" style="display: none;">
                    ※作成手順の一例です。<br>
                    別解でも形が合えば正解となります。
                </div>
                
                <div id="replay-controls" class="replay-controls" style="display: none;">
                    <button id="btn-replay-prev" class="sm-btn">◀</button>
                    <span id="replay-step-text">1 / 5</span>
                    <button id="btn-replay-next" class="sm-btn">▶</button>
                </div>
            </div>

            <div class="controls">
                
                <div id="sandbox-controls" class="control-group">
                    <label style="font-size:0.85rem;">ノード数</label>
                    <input type="number" id="node-count" value="5" min="3" max="100">
                    <button id="btn-start-challenge">問題に挑戦</button>
                </div>

                <div class="control-group">
                    <button id="btn-quit-challenge" style="display:none;">練習モードへ</button>
                    
                    <button id="btn-theme">🌗</button>
                    <button id="btn-reset-camera" title="視点を戻す">⌖</button>
                    
                    <div class="divider"></div>
                    <button id="btn-undo" disabled data-key="Z">戻す</button>
                    <button id="btn-reset" data-key="R">リセット</button>
                </div>
            </div>
        </div>
    </div>

    <div id="help-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>遊び方</h2>
            <p>与えられた「正解の形」と同じグラフを作ってください。<br>エッジは関係ありません。</p>
            
            <h3>基本操作</h3>
            <ul class="help-list">
                <li>
                    <strong>Grow (増やす)</strong>: <br>
                    何もないマスへ伸びるエッジをクリック<br>
                    <span style="font-size:0.85em; opacity:0.8;">※元のノードの色が反転します。</span>
                </li>
                <li>
                    <strong>Split (分割)</strong>: <br>
                    エッジ（線）をクリック。<br>
                    <span style="font-size:0.85em; opacity:0.8;">※間に新しいノードが挿入され、両端の色が反転します。</span>
                </li>
            </ul>

            <h3>コントロール</h3>
            <ul class="help-list">
                <li><strong>Zキー</strong>: 一手戻る</li>
                <li><strong>Rキー</strong>: リセット</li>
            </ul>

            <button id="btn-close-help" class="primary-btn">閉じる</button>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

</body>
</html>